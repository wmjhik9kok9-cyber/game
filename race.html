<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¢ãƒ‹ãƒãƒ«ãƒ»ãƒ€ãƒ¼ãƒ“ãƒ¼</title>
    <style>
        body { font-family: sans-serif; background: #27ae60; color: white; text-align: center; margin: 0; padding: 20px; }
        .track-field { background: #2ecc71; width: 95%; max-width: 600px; margin: 20px auto; padding: 10px; border: 5px solid #fff; border-radius: 10px; position: relative; overflow: hidden; }
        .lane { height: 45px; border-bottom: 1px dashed rgba(255,255,255,0.4); position: relative; display: flex; align-items: center; }
        .animal { position: absolute; left: 0; font-size: 30px; transition: left 0.1s linear; z-index: 2; }
        .goal-line { position: absolute; right: 60px; top: 0; bottom: 0; width: 6px; background: #e74c3c; z-index: 1; }
        .controls { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; display: inline-block; margin-bottom: 20px; }
        #status-area { font-size: 22px; font-weight: bold; background: #f39c12; color: #2c3e50; padding: 10px; border-radius: 10px; display: none; margin-bottom: 15px; }
        select { font-size: 20px; padding: 10px; border-radius: 5px; }
        button { font-size: 20px; padding: 10px 25px; background: #e67e22; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        #result-msg { font-size: 24px; margin-top: 20px; min-height: 80px; }
    </style>
</head>
<body>

    <h1>ğŸ ã‚¢ãƒ‹ãƒãƒ«ãƒ»ãƒ€ãƒ¼ãƒ“ãƒ¼ ğŸ</h1>

    <div id="status-area">ã‚ãªãŸã®äºˆæƒ³ï¼š<span id="my-pick"></span></div>

    <div class="controls" id="ui">
        <p>1ç€ã‚’äºˆæƒ³ã—ã¦ã­ï¼</p>
        <select id="prediction"></select><br>
        <button onclick="startRace()">ãƒ¬ãƒ¼ã‚¹é–‹å§‹ï¼</button>
    </div>

    <div class="track-field" id="track">
        <div class="goal-line"></div>
    </div>

    <div id="result-msg"></div>

<script>
    // 10ç¨®é¡ã®å‹•ç‰©ãŸã¡ï¼ˆã€Œç¦ã€ã‚’ã€ŒğŸ¢ (ã‚«ãƒ¡)ã€ã«å¤‰æ›´ã—ã¾ã—ãŸï¼‰
    const animals = ["ğŸ±", "ğŸ°", "ğŸ¢", "ğŸ¦", "ğŸ¼", "ğŸ¨", "ğŸ¯", "ğŸ¦“", "ğŸ¦„", "ğŸµ"];
    const track = document.getElementById("track");
    const select = document.getElementById("prediction");
    const goalX_percentage = 85; // ã‚´ãƒ¼ãƒ«åˆ¤å®šä½ç½®ã®ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸
    let winnerIndex = -1; // 1ç€ãŒæ±ºã¾ã£ãŸã‚‰æ›´æ–°ã•ã‚Œã‚‹

    animals.forEach((emoji, i) => {
        let opt = document.createElement("option");
        opt.value = i;
        opt.innerText = `${i + 1}ç•ªï¼š${emoji}`;
        select.appendChild(opt);

        let lane = document.createElement("div");
        lane.className = "lane";
        lane.innerHTML = `<span class="animal" id="animal-${i}" style="left: 0%">${emoji}</span>`;
        track.appendChild(lane);
    });

    function startRace() {
        const pickIdx = select.value;
        document.getElementById("my-pick").innerText = animals[pickIdx];
        document.getElementById("status-area").style.display = "inline-block";
        document.getElementById("ui").style.display = "none";
        
        const racers = animals.map((_, i) => ({ id: `animal-${i}`, pos: 0, isFinished: false }));

        const interval = setInterval(() => {
            let allRacersStopped = true;

            racers.forEach((racer, index) => {
                // æ—¢ã«ã‚´ãƒ¼ãƒ«ã—ã¦ã„ã‚‹å‹•ç‰©ã¯å‹•ã‹ã•ãªã„
                if (racer.isFinished) {